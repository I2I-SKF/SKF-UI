<div class="w-100" >

  <div style="overflow-x: auto;">
    <table mat-table [dataSource]="dataSource" matSort class="table table-striped">
      <ng-container
        *ngFor="let column of columns; let columnIndex = index"
        [matColumnDef]="column"
      >
        <th   mat-sort-header mat-header-cell *matHeaderCellDef>{{ column }}</th>
        <td
        
          [ngClass]="{ tag_cancelled: row['Connection'] == 'Offline' }"
          mat-cell
          *matCellDef="let row; let rowIndex = index"
        >
          <ng-container
            *ngIf="
              column !== 'Action' &&
              column !== 'Pin' &&
              column !== 'System Health' &&
              column !== 'Comment History'
             
            "
          >
            <span class="table-data-color font-size-xs" (click)="onRowClick($event, row)">
              {{ row[column] }}
            </span>
          </ng-container>
          <ng-container *ngIf="column == 'Pin'">
            <span>
              <span
                class="font-size-xs cursor-pointer"
                [popoverTitle]="'PIN'"
                [autoClose]="'outside'"
                [ngbPopover]="row[column]"
              >
                Show
              </span>
            </span>
          </ng-container>
          <ng-container *ngIf="column == 'System Health'">
            <span>
              <span
                class="font-size-xs cursor-pointer"
                [popoverTitle]="'System Health'"
                [autoClose]="'outside'"
                [ngbPopover]="row['system_health_details']"
              >
                {{ row[column] }}
              </span>
            </span>
          </ng-container>
          <ng-container *ngIf="column == 'Comment History'" >
            <span  class="link-primary" title="click to see comment history for this ticket." (click)="onCommentHistory(row)">
             View
            </span>
        </ng-container>
         
  
          <ng-container *ngIf="column == 'Action'">
            <ng-container *ngIf="actions.type == 'btn'">
              <!-- <button
                class="btn  d-flex align-items-center"
                *ngFor="let button of actions.data"
                (click)="onButtonClicked($event,row, button)"
  
              >
                {{ button }}
              </button> -->
              <ng-container *ngFor="let button of actions.data">
                <span
                  class="link-primary"
                  (click)="onButtonClicked($event, row, button)"
                 
                >
                {{button}}
                </span>
              </ng-container>
            </ng-container>
            <ng-container *ngIf="actions?.type == 'dd'">
              <select
                style="min-width: 100px"
                class="action-select"
                (change)="onSelectionChange($event, row)"
              >
                <option value="option" *ngFor="let option of row?.['Action']">
                  {{ option }}
                </option>
              </select>
            </ng-container>
          </ng-container>
        </td>
      </ng-container>
  
      <tr class="header-color" mat-header-row *matHeaderRowDef="columns"></tr>
      <tr class="body_row" mat-row *matRowDef="let row; columns: columns"></tr>
    </table>
  </div>
  <div
    *ngIf="data?.length == 0"
    class="d-flex align-items-end justify-content-center p-2 fw-bold"
  >
    No Records Found
  </div>
</div>
<mat-paginator style="border-bottom: 1px solid #383838;"  [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="10"></mat-paginator>

